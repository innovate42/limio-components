import React, { useState } from 'react';
import PropTypes from 'prop-types';
import FormFieldSearch from '../forms/form-field-search';
import css from './search-form.css';

const SearchForm = ({ labelText, searchUrl, searchIsOpen }) => {
  const [searchValue, onChangeSearchValue] = useState('');
  function handleChangeSearchValue(e) {
    onChangeSearchValue(e.target.value);
  }
  return (
    <div className={css['ds-search-form']}>
      {/* Allows for tabbing from the search disclosure. */}
      <div id='search-form' tabIndex='-1' role='presentation' />
      <form
        action={searchUrl}
        method='get'
        className={css['ds-search-form-container']}
      >
        <FormFieldSearch
          adjacent
          value={searchValue}
          onChange={handleChangeSearchValue}
          inverse
          labelText={labelText}
          name='q'
          focusInput={searchIsOpen}
          id='masthead-search'
        />
      </form>
    </div>
  );
};

SearchForm.defaultProps = {
  labelText: 'Search',
  searchUrl: '',
  searchIsOpen: false,
};

SearchForm.propTypes = {
  labelText: PropTypes.string,
  searchUrl: PropTypes.string,
  searchIsOpen: PropTypes.bool,
};

export default SearchForm;
