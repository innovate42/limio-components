import React from 'react';
import PropTypes from 'prop-types';
import classnames from 'classnames';
import 'reset-css/reset.css';
import '../color/color';
import '../interactions/interactions';
import '../typography/typography';
import getUserInitials from '../../util/user-initials';
import css from './account-disclosure.css';

const AccountDisclosure = ({
  className,
  text,
  inverse,
  expanded,
  fullName,
  ...otherProps
}) => {
  const initials = getUserInitials(fullName);
  return (
    <>
      <button
        className={classnames(className, css['ds-account-disclosure'], {
          [css['ds-account-disclosure--inverse']]: inverse,
          [css['is-selected']]: expanded,
        })}
        type='button'
        {...otherProps}
      >
        <div
          className={classnames(css['ds-account-disclosure__avatar-initials'], {
            [css['ds-account-disclosure__avatar-initials--inverse']]: inverse,
          })}
        >
          {initials || (
            <svg
              viewBox='0 0 22 22'
              xmlns='http://www.w3.org/2000/svg'
              className={css['ds-account-disclosure__avatar']}
            >
              <g fill='none' fillRule='evenodd'>
                <path
                  className='avatar-foreground'
                  d='M10.9993 10.9998C13.0252 10.9998 14.666 9.359 14.666 7.33317C14.666 5.30734 13.0252 3.6665 10.9993 3.6665C8.97352 3.6665 7.33268 5.30734 7.33268 7.33317C7.33268 9.359 8.97352 10.9998 10.9993 10.9998ZM10.9993 12.8332C8.55185 12.8332 3.66602 14.0615 3.66602 16.4998V17.4165C3.66602 17.9207 4.07852 18.3332 4.58268 18.3332H17.416C17.9202 18.3332 18.3327 17.9207 18.3327 17.4165V16.4998C18.3327 14.0615 13.4468 12.8332 10.9993 12.8332Z'
                  fill='white'
                  fillRule='nonzero'
                />
              </g>
            </svg>
          )}
        </div>
        <div className={`${css['ds-account-disclosure__avatar-text']}`}>
          {text}
        </div>

        <svg
          viewBox='0 0 24 24'
          xmlns='http://www.w3.org/2000/svg'
          className={classnames(
            className,
            css['ds-account-disclosure__arrow'],
            {
              [css['is-selected']]: expanded,
            },
          )}
        >
          <g fill='none' fillRule='evenodd'>
            <path
              className='path-foreground'
              fill='#0D0D0D'
              fillRule='nonzero'
              d='M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z'
            />
            <path d='M0 0h24v24H0z' />
          </g>
        </svg>
      </button>
      {expanded && (
        <div
          className={`${css['ds-account-disclosure__overlay']}`}
          {...otherProps}
        />
      )}
    </>
  );
};

AccountDisclosure.defaultProps = {
  className: null,
  text: '',
  inverse: false,
  expanded: false,
  fullName: '',
};

AccountDisclosure.propTypes = {
  className: PropTypes.string,
  text: PropTypes.string,
  inverse: PropTypes.bool,
  expanded: PropTypes.bool,
  fullName: PropTypes.string,
};

export default AccountDisclosure;
