import React, { useState } from 'react';
import PropTypes from 'prop-types';
import classnames from 'classnames';
import css from './control-check.css';

const ControlCheck = ({ label, id, handleClick, complete, ...otherProps }) => {
  const [checked, setChecked] = useState(false);

  const onChange = e => {
    setChecked(e.target.checked);
    handleClick();
  };

  return (
    <div className='ds-control-check'>
      {complete ? (
        <span
          className={classnames(
            css['ds-control-check__icon'],
            css['ds-control-check__icon--complete'],
          )}
          aria-label={label}
        />
      ) : (
        <>
          <input
            type='checkbox'
            onChange={e => onChange(e)}
            checked={checked}
            id={id}
            {...otherProps}
          />
          <label className={css['ds-control-check__icon']} htmlFor={id}>
            <span className={css['ds-control-check__label-text']}>{label}</span>
          </label>
        </>
      )}
    </div>
  );
};

ControlCheck.defaultProps = {
  complete: false,
  handleClick: () => {},
};

ControlCheck.propTypes = {
  label: PropTypes.string.isRequired,
  id: PropTypes.string.isRequired,
  complete: PropTypes.bool,
  handleClick: PropTypes.func,
};

export default ControlCheck;
