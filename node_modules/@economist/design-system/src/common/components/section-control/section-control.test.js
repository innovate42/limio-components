import React from 'react';
import { shallow } from 'enzyme';
import SectionControl from './section-control';

describe('<SectionControl />', () => {
  it('should render the correct default props', () => {
    const component = shallow(
      <SectionControl sectionTitle='Section title'>
        Section text
      </SectionControl>,
    );
    expect(component.find('details').props().className).toEqual(
      'ds-section-control',
    );
  });

  it('should render the text', () => {
    const component = shallow(
      <SectionControl sectionTitle='Section title'>
        Section text
      </SectionControl>,
    );
    expect(component.find('summary').text()).toEqual('Section title');
    expect(component.find('div').text()).toEqual('Section text');
  });

  it('should render inverse classname if inverse prop is passed', () => {
    const component = shallow(
      <SectionControl inverse sectionTitle='Section title'>
        Section text
      </SectionControl>,
    );
    expect(component.find('details').props().className).toEqual(
      'ds-section-control ds-section-control--inverse',
    );
  });

  it('should toggle aria-expanded when clicked', () => {
    const component = shallow(
      <SectionControl sectionTitle='Section title'>
        Section text
      </SectionControl>,
    );
    component.find('summary').simulate('click');
    expect(component.find('summary').props()['aria-expanded']).toEqual('true');
    component.find('summary').simulate('click');
    expect(component.find('summary').props()['aria-expanded']).toEqual('false');
  });
});
